"use strict";var dictionary={error:{ru:"Введите корректный адрес!",en:"Enter the correct address!"},success:{ru:"На вашу электрнную почту выслана ссылка для изменения пароля.",en:"A link to change your password has been sent to your email."},attention:{ru:"Указанная электрнная почта отсутствует в нашей базе данных. Вы уверенны, что являетесь нашим клиентом?",en:"The specified email is not in our database. Are you sure you are our customer?"}},isMessageVisible=!1;function showErrorMessage(e,r,i,a){var s,t=$(e)[0],o=$(t).outerWidth(),n=$(t).position().left,c=i||$(t).position().top+$(t).outerHeight(),l=$(".language-switcher").attr("data-lang"),u=$('<div class="recoveryform__error"></div>').text(r[l]).append('<div class="error-triangle"></div>');s=a?a+"px":n+o/2-20+"px",$(u).css("top",c+10),$($(".recoveryform")[0]).append(u),$($(".error-triangle")[0]).css("left",s)}function isEmailValid(e){var r=calculateCharsInStr(e,"@");return 1==r&&(!((r=calculateCharsInStr(e,"."))<1)&&("@"!=e.charAt(0)&&"."!=e.charAt(0)&&"@"!=e.charAt(e.length-1)&&"."!=e.charAt(e.length-1)&&(-1==e.indexOf("@.")&&-1!=e.split("@")[1].indexOf("."))))}function calculateCharsInStr(e,r){for(var i=0,a=0;;){var s=e.indexOf(r,i);if(-1==s)break;a++,i=s+1}return a}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}$(".recoveryform__btn").click(function(){var e=$("#input-email").val();if(!isEmailValid(e)){if(isMessageVisible)return;return $("#input-email").css({"box-shadow":"0 0 5px red","border-color":"red"}).focus(),showErrorMessage("#input-email",dictionary.error,40,200),void(isMessageVisible=!0)}var r={email:e};$.ajax({url:"https://platform.globaltradeinvesting.com/api/PassReset",type:"GET",data:r,success:function(e){if(1==e){console.log("data",e);showErrorMessage("#input-email",dictionary.success,40,200)}else showErrorMessage("#input-email",dictionary.attention,40,200)}})}),$("#input-email").keyup(function(){isEmailValid($("#input-email").val())&&($(".recoveryform__error").remove(),isMessageVisible=!1,$("#input-email").css({"box-shadow":"none","border-color":"#6a9a1f"}))});